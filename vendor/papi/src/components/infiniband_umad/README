/** 
* @file:   README
* CVS:     $Id$
* @author: Dan Terpstra
*          terpstra@icl.utk.edu
* @defgroup papi_components Components
* @brief Component Specific Readme file: Infiniband
*/

/** @page component_readme Component Readme 

@section Component Specific Information

infiniband_umad/
These files have the source code for a component that enables PAPI-C to access hardware monitoring counters for InfiniBand devices through the OFED library. Since a new interface was introduced with OFED version 1.4 (released Dec 2008), the current InfiniBand component does not support OFED versions < 1.4.


How to install PAPI with the infiniband_umad component?
-------------------------------------------------------

PAPI provides the following environment variables to specify the include and library path:

PAPI_INFINIBAND_MAD_ROOT   default /usr
PAPI_INFINIBAND_UMAD_ROOT  default /usr

PAPI_INFINIBAND_MAD_INC   default /usr/include/infiniband
PAPI_INFINIBAND_UMAD_INC  default /usr/include/infiniband
PAPI_INFINIBAND_MAD_LIB   default /usr/lib64
PAPI_INFINIBAND_UMAD_LIB  default /usr/lib64


If you overwrite PAPI_INFINIBAND_MAD_ROOT, e.g.

export PAPI_INFINIBAND_MAD_ROOT = /software/infiniband

PAPI will use the following configuration by default:
PAPI_INFINIBAND_MAD_INC = $PAPI_INFINIBAND_MAD_ROOT/include
PAPI_INFINIBAND_MAD_LIB = $PAPI_INFINIBAND_MAD_ROOT/lib64

If the include and library path does not match the scheme above you have to set the correct path for
PAPI_INFINIBAND_(U)MAD_INC and PAPI_INFINIBAND_(U)MAD_LIB.


Configure PAPI with infiniband_umad enabled.  
    % cd src
    % ./configure --prefix=some_location --with-components="infiniband_umad"
    % make


Before working with the infiniband_umad component, verify it's active by running
   % ./papi_component_avail"
and check if it listed under the "Active Components" list.

Note:
If the library libmad.so or libumad.so cannot be found, you can use the runtime environment variables PAPI_INFINIBAND_MAD_LIBNAME or PAPI_INFINIBAND_UMAD_LIBNAME to set the correct path and library name, e.g.

export PAPI_INFINIBAND_MAD_LIBNAME = /usr/lib64/libmad.so
export PAPI_INFINIBAND_UMAD_LIBNAME = /usr/lib64/libumad.so
